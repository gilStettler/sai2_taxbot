<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <title>Bern Chatbot</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app">
      <header class="app-header">
        <div class="header-main">
          <h1>TaxBot Bern</h1>
          <p class="subtitle">Einfach, schnell und bärenstark.</p>
        </div>
        <div class="header-actions">
          <div class="api-key-container">
            <label for="apiKeyInput">OpenAI API Key</label>
            <div class="api-key-row">
              <input id="apiKeyInput" type="password" placeholder="sk-..." />
              <button id="saveApiKeyBtn" type="button">Speichern</button>
            </div>
            <span id="apiKeyStatus" class="status"></span>
          </div>
          <button id="clearChatBtn" type="button" class="ghost-button">
            Verlauf löschen
          </button>
        </div>
      </header>

      <main class="chat-container">

        <!-- GANZER CHAT -->
        <div id="chatWindow" class="chat-window">

          <!-- Hinweis ist jetzt Teil des scrollbaren Bereichs -->
          <div class="info-banner">
            <p>
              <strong>Hinweis:</strong> Dieser Chatbot basiert auf künstlicher
              Intelligenz und kann unvollständige oder fehlerhafte Aussagen
              generieren. Wir übernehmen keine Verantwortung für die automatisch
              erzeugten Inhalte und empfehlen, die Antworten stets kritisch zu
              prüfen und nicht unreflektiert zu übernehmen.
            </p>

            <p>
              Für optimale Ergebnisse bitten wir Sie, Ihre Fragen möglichst
              <strong>klar, detailliert und konkret</strong> zu formulieren.
            </p>

            <p>
              Die Antworten des Chatbots basieren auf folgenden Dokumenten:<br />
              •
              <a
                href="https://www.fedlex.admin.ch/eli/cc/1991/1184_1184_1184/de"
                target="_blank"
                >Bundesgesetz über die direkte Bundessteuer (DBG) 642.11</a
              ><br />
              •
              <a
                href="https://www.belex.sites.be.ch/app/de/texts_of_law/661.11"
                target="_blank"
                >Steuergesetz Kanton Bern (StG) BSG 661.11</a
              ><br />
              •
              <a
                href="https://www.sv.fin.be.ch/content/dam/sv_fin/dokumente/de/belogin_leitfaden_online_de.pdf"
                target="_blank"
                >Leitfaden Online-Ausfüllen der Steuererklärung</a
              ><br />
              •
              <a
                href="https://www.wegleitung.sv.fin.be.ch/content/dam/sv_fin/dokumente/de/wegleitungen/2024/wl_natuerliche-personen_2024_de.pdf"
                target="_blank"
                >Wegleitung Kanton Bern für natürliche Personen</a
              >
            </p>
          </div>

          <!-- nur die Nachrichten -->
          <div id="chatMessages" class="chat-messages"></div>
        </div>
      </main>

      <footer class="input-area">
        <form id="chatForm">
          <input
            id="userInput"
            type="text"
            placeholder="Schreibe eine Nachricht…"
            autocomplete="off"
            required
          />
          <button type="submit">Senden</button>
        </form>
      </footer>
    </div>

    <!-- Markdown-Renderer -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
